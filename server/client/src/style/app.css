@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
    /* =========================
       ðŸŽ¨ Navigation
       ========================= */
    .nav-link {
        @apply rounded-xl transition-all duration-300 relative;
        width: 3.5rem;
        height: 3.5rem;
        min-width: 3.5rem;
        min-height: 3.5rem;
        background-color: transparent;
        color: var(--text-main) !important;
        border: 2px solid transparent;
        font-size: 1.5rem !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        text-decoration: none;
        z-index: 1;
        line-height: 1;
    }

    /* Assurer que les icÃ´nes FontAwesome sont visibles */
    .nav-link.fa-solid::before {
        font-family: "Font Awesome 6 Free" !important;
        font-weight: 900 !important;
        font-size: 1.5rem !important;
        display: inline-block !important;
        z-index: 2 !important;
        position: relative !important;
    }

    /* Effet de halo au hover - utiliser ::after au lieu de ::before */
    .nav-link::after {
        content: '';
        position: absolute;
        inset: -0.5rem;
        border-radius: 1rem;
        background-color: transparent;
        transition: all 0.3s ease;
        z-index: -1;
        pointer-events: none;
    }

    .nav-link:hover {
        background-color: var(--hover);
        border-color: var(--primary);
        transform: translateY(-2px) scale(1.05);
        box-shadow: var(--shadow-md);
        color: var(--primary);
    }

    .nav-link:hover::after {
        background-color: var(--hover);
        opacity: 0.3;
    }

    .nav-link:active {
        transform: translateY(0) scale(1);
        box-shadow: var(--shadow-sm);
    }

    .nav-link.selected {
        background-color: var(--primary);
        color: white !important;
        border-color: var(--btn-border);
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
        animation: pulse-selected 2s ease-in-out infinite;
    }

    @keyframes pulse-selected {
        0%, 100% {
            box-shadow: var(--shadow-md);
        }
        50% {
            box-shadow: var(--shadow-lg), 0 0 0 4px rgba(79, 70, 229, 0.1);
        }
    }

    [data-theme="dark"] .nav-link.selected {
        animation: pulse-selected-dark 2s ease-in-out infinite;
    }

    @keyframes pulse-selected-dark {
        0%, 100% {
            box-shadow: var(--shadow-md);
        }
        50% {
            box-shadow: var(--shadow-lg), 0 0 0 4px rgba(108, 99, 255, 0.2);
        }
    }

    .theme-toggle {
        @apply rounded-xl transition-all duration-300 relative;
        width: 3.5rem;
        height: 3.5rem;
        min-width: 3.5rem;
        min-height: 3.5rem;
        background-color: transparent;
        color: var(--text-main) !important;
        border: 2px solid var(--border);
        cursor: pointer;
        font-size: 1.5rem !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        z-index: 1;
        line-height: 1;
    }

    .theme-toggle::before {
        content: '';
        position: absolute;
        inset: -0.5rem;
        border-radius: 1rem;
        background-color: transparent;
        transition: all 0.3s ease;
        z-index: -1;
        pointer-events: none;
    }

    .theme-toggle:hover {
        background-color: var(--hover);
        border-color: var(--primary);
        transform: translateY(-2px) scale(1.05);
        box-shadow: var(--shadow-md);
        color: var(--primary);
    }

    .theme-toggle:hover::before {
        background-color: var(--hover);
        opacity: 0.3;
    }

    .theme-toggle:active {
        transform: translateY(0) scale(1);
        box-shadow: var(--shadow-sm);
    }

    /* =========================
       ðŸŽ¨ Cards & Panels
       ========================= */
    .card {
        background-color: var(--bg-panel);
        color: var(--text-main);
        @apply px-6 py-8 rounded-xl mx-auto;
        box-shadow: var(--shadow-md);
        border: 1px solid var(--border);
        max-width: 90rem;
        width: 100%;
    }

    .shopping-card {
        border: none;
        box-shadow: none;
        background-color: var(--bg-panel);
        opacity: 0.7;
    }

    .title {
        @apply font-bold mb-8 text-2xl;
        color: var(--text-heading);
    }

    .input {
        @apply block w-full rounded-lg p-3 placeholder:text-sm border outline-0 mb-4 transition-all duration-200;
        background-color: var(--bg-panel);
        color: var(--text-main);
        border-color: var(--border);
    }

    .input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        outline: none;
    }

    /* Styles pour les inputs de type number */
    input[type="number"] {
        background-color: var(--bg-panel) !important;
        color: var(--text-main) !important;
        border-color: var(--border) !important;
    }

    input[type="number"]:focus {
        border-color: var(--primary) !important;
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1) !important;
    }

    /* Styles pour les selects */
    select {
        background-color: var(--bg-panel) !important;
        color: var(--text-main) !important;
        border-color: var(--border) !important;
    }

    select:focus {
        border-color: var(--primary) !important;
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1) !important;
        outline: none !important;
    }

    /* Styles pour les options dans les selects */
    select option {
        background-color: var(--bg-panel) !important;
        color: var(--text-main) !important;
    }

    .btn {
        @apply block w-full rounded-lg p-3 font-semibold transition-all duration-200 cursor-pointer;
        background-color: var(--btn-bg);
        color: white;
        border: 1px solid var(--btn-border);
        box-shadow: var(--shadow-sm);
    }

    .btn:hover {
        background-color: var(--btn-hover-bg);
        border-color: var(--btn-hover-border);
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
    }

    .btn:active {
        transform: translateY(0);
        box-shadow: var(--shadow-xs);
    }

    /* =========================
       ðŸŽ¨ Buttons
       ========================= */
    .button {
        @apply font-semibold py-2 px-4 rounded-lg transition-all duration-200;
        background-color: var(--secondary);
        color: white;
        border: 1px solid var(--btn-border);
        box-shadow: var(--shadow-sm);
    }

    .button:hover {
        background-color: var(--btn-hover-bg);
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
    }

    .validate-button {
        @apply font-semibold py-2 px-4 rounded-lg transition-all duration-200;
        background-color: #10b981;
        color: white;
        border: 1px solid #059669;
        box-shadow: var(--shadow-sm);
    }

    .validate-button:hover {
        background-color: #059669;
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
    }

    .validate-button:disabled {
        background-color: #6b7280;
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
    }

    .delete-button {
        @apply font-semibold py-2 px-4 rounded-lg transition-all duration-200;
        background-color: #ef4444;
        color: white;
        border: 1px solid #dc2626;
        box-shadow: var(--shadow-sm);
    }

    .delete-button:hover {
        background-color: #dc2626;
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
    }

    .close-button {
        @apply absolute top-2 right-2 rounded-lg p-2 transition-all duration-200;
        color: var(--text-muted);
        background-color: transparent;
        border: 1px solid transparent;
    }

    .close-button:hover {
        color: var(--text-main);
        background-color: var(--hover);
        border-color: var(--border);
    }

    .dot {
        @apply w-4 h-4 rounded-full leading-5;
    }

    .input-field {
        @apply mr-4 content-center w-full px-4 py-3 rounded-lg shadow-sm sm:text-sm transition-all duration-200;
        background-color: var(--bg-panel);
        color: var(--text-main);
        border: 2px solid var(--border);
        font-weight: 500;
    }

    .input-field:hover {
        border-color: var(--primary);
        background-color: var(--hover);
    }

    .input-field:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.15);
        outline: none;
        background-color: var(--hover);
    }

    .datepicker-input {
        @apply text-sm rounded-lg flex w-full p-2.5 text-center transition-all duration-200 font-medium;
        background-color: var(--bg-panel);
        color: var(--text-main);
        border: 2px solid var(--border);
        min-width: 140px;
    }

    .datepicker-input:hover {
        border-color: var(--primary);
        background-color: var(--hover);
    }

    .datepicker-input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.15);
        outline: none;
        background-color: var(--hover);
    }

    /* ----- DASHBOARD ----- */

    .highlight {
        @apply animation: highlight-animation 1s ease-in-out;
    }

    /* ------- POST -------- */

    .post-title-input {
        @apply font-bold first-letter:uppercase overflow-auto;
        color: var(--primary);
    }

    .post .priority-flag,
    .calendar-post .priority-flag {
        @apply cursor-auto text-sm;
        margin-right: 0.25rem;
    }

    .post-list-section {
        @apply h-full place-content-evenly;
    }

    .post-list-header {
        @apply flex justify-evenly mb-8 text-3xl h-10;
    }

    .post-info-panel {
        @apply overflow-auto h-4/6;
    }

    /* =========================
       ðŸŽ¨ Popups
       ========================= */
    .xpopup-overlay {
        @apply fixed inset-0 flex justify-center items-center z-10;
        background-color: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
    }

    .xpopup {
        @apply p-8 rounded-xl relative;
        background-color: var(--bg-panel);
        color: var(--text-main);
        box-shadow: var(--shadow-xl);
        border: 1px solid var(--border);
        max-width: 90vw;
        max-height: 90vh;
        overflow-y: auto;
    }

    .xpopup-panel-buttons {
        @apply relative flex justify-evenly mt-8;
    }

    .xpopup .priority-flag {
        @apply absolute top-1/2 -right-6 -translate-y-1/2;
    }

    /* ----- SHOPPING ---- */

    .shopping-tab {
        @apply flex flex-col;
    }

    .shopping-day-list {
        @apply rounded-xl p-5 mb-5 relative transition-all duration-200;
        background-color: var(--bg-panel);
        border: 1px solid var(--border);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        border-left: 4px solid var(--primary);
    }

    .shopping-day-list:hover {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
        transform: translateY(-2px);
    }

    .shopping-chevron-icon {
        @apply absolute left-1 text-xl p-2 cursor-pointer;
        top: calc(1.25rem + 1.25rem); /* padding-top de shopping-day-list (p-5 = 1.25rem) + moitiÃ© de la hauteur du header (h-10/2 = 1.25rem) */
        transform: translateY(-50%);
    }

    .shopping-day-list:has(.rolled) .shopping-total-bar,
    .shopping-day-list:has(.rolled) .post-info-panel {
        @apply hidden;
    }

    .shopping-day-list section.post-list-section {
        @apply h-fit;
    }

    .shopping-day-list .post-list-header {
        @apply my-0 mb-4;
        border-bottom: 2px solid var(--border);
        padding-bottom: 0.75rem;
    }

    .shopping-day-list .post-list-header .fa-circle-plus {
        @apply text-xl ml-2;
    }

    .shopping-post-body-count {
        @apply inline-block px-3 py-1 text-xs font-medium rounded-lg text-center transition-all duration-200;
        color: var(--text-muted);
        background-color: var(--hover);
        border: none;
    }

    .shopping-post-body-count:hover {
        color: var(--text-main);
        background-color: var(--primary);
        color: white;
    }

    .shopping-total-bar {
        @apply flex place-content-evenly mt-4 pt-4;
        border-top: none;
    }

    .shopping-total-text {
        @apply content-center px-2 py-1 text-sm font-medium rounded-md;
        color: var(--text-muted);
        background-color: transparent;
    }

    .shopping-date-popup .react-datepicker-wrapper {
        @apply flex
    }

    /* ----- CALENDAR ----- */
    .add-event-calendar {
        @apply text-3xl;
    }

    .editable-calendar {
        @apply relative h-fit mb-10 mt-20;
    }

    .editable-calendar button {
        @apply relative;
    }

    .calendar-popup-input>.priority-flag {
        @apply absolute top-1/2 -right-6 -translate-y-1/2;
    }

    .calendar-dot-list {
        @apply flex absolute left-1/2 -translate-x-1/2 -translate-y-1/2 top-3/4;
    }

    .calendar-tab {
        @apply flex flex-col relative;
    }

    .calendar-div {
        @apply mb-6 mr-8;
    }

    .calendar-list-event {
        @apply min-h-[400px];
    }

    .events-calendar {
        @apply mt-6;
    }

    .calendar-datepicker-input {
        @apply text-center pl-8 w-full p-2 rounded-lg shadow-sm text-sm transition-all duration-200;
        background-color: var(--bg-panel);
        color: var(--text-main);
        border: 1px solid var(--border);
    }

    .calendar-datepicker-input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        outline: none;
    }

    .calendar-tab .react-datepicker {
        @apply flex;
    }

    .calendar-popup-time-picker {
        @apply mt-4;
    }

    .calendar-popup-time-picker .react-time-picker__wrapper {
        @apply rounded-lg pl-16 pr-4 justify-center transition-all duration-200;
        background-color: var(--bg-panel);
        color: var(--text-main);
        border: 1px solid var(--border);
    }

    .calendar-popup-time-picker .react-time-picker__wrapper:focus-within {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }

    /* =========================
       ðŸŽ¨ React Calendar Theme (react-calendar)
       ========================= */
    .react-calendar {
        background-color: var(--bg-panel) !important;
        border: 1px solid var(--border) !important;
        border-radius: 0.5rem !important;
        color: var(--text-main) !important;
        font-family: var(--main-font) !important;
        width: 100% !important;
    }

    .react-calendar__navigation {
        background-color: var(--bg-header) !important;
        border-bottom: 1px solid var(--border) !important;
        padding: 0.5rem 0 !important;
        margin-bottom: 0.5rem !important;
    }

    .react-calendar__navigation button {
        color: var(--text-heading) !important;
        background-color: transparent !important;
        border: none !important;
        font-weight: 600 !important;
        font-size: 1rem !important;
        min-width: 44px !important;
        padding: 0.5rem !important;
    }

    .react-calendar__navigation button:hover {
        background-color: var(--hover) !important;
        border-radius: 0.25rem !important;
    }

    .react-calendar__navigation button:enabled:hover,
    .react-calendar__navigation button:enabled:focus {
        background-color: var(--hover) !important;
    }

    .react-calendar__navigation button:disabled {
        opacity: 0.5 !important;
    }

    .react-calendar__month-view__weekdays {
        background-color: var(--bg-header) !important;
        border-bottom: 1px solid var(--border) !important;
        padding: 0.5rem 0 !important;
    }

    .react-calendar__month-view__weekdays__weekday {
        color: var(--text-subheading) !important;
        font-weight: 500 !important;
        padding: 0.5rem 0 !important;
        text-align: center !important;
    }

    .react-calendar__month-view__weekdays__weekday abbr {
        text-decoration: none !important;
    }

    .react-calendar__tile {
        background-color: transparent !important;
        color: var(--text-main) !important;
        border: 1px solid transparent !important;
        border-radius: 0.25rem !important;
        padding: 0.75rem 0.5rem !important;
        transition: all 0.2s ease !important;
        min-height: 44px !important;
    }

    .react-calendar__tile:hover {
        background-color: var(--hover) !important;
        border-color: var(--border) !important;
    }

    .react-calendar__tile:enabled:hover,
    .react-calendar__tile:enabled:focus {
        background-color: var(--hover) !important;
        border-color: var(--primary) !important;
    }

    .react-calendar__tile--active {
        background-color: var(--primary) !important;
        color: white !important;
        border-color: var(--btn-border) !important;
        box-shadow: var(--shadow-sm) !important;
    }

    .react-calendar__tile--active:enabled:hover,
    .react-calendar__tile--active:enabled:focus {
        background-color: var(--btn-hover-bg) !important;
        border-color: var(--btn-hover-border) !important;
    }

    .react-calendar__tile--now {
        background-color: transparent !important;
        background: transparent !important;
        color: var(--text-heading) !important;
        border: 2px solid var(--primary) !important;
        border-radius: 0.375rem !important;
        font-weight: 600 !important;
        box-shadow: 0 0 0 1px var(--primary) inset, var(--shadow-xs) !important;
    }

    .react-calendar__tile--now:enabled:hover,
    .react-calendar__tile--now:enabled:focus {
        background-color: var(--hover) !important;
        background: var(--hover) !important;
        border-color: var(--primary) !important;
        box-shadow: 0 0 0 1px var(--primary) inset, var(--shadow-sm) !important;
    }

    /* Surcharge spÃ©cifique avec plus de spÃ©cificitÃ© */
    .react-calendar .react-calendar__tile--now {
        background-color: transparent !important;
        background: transparent !important;
    }

    .editable-calendar .react-calendar .react-calendar__tile--now {
        background-color: transparent !important;
        background: transparent !important;
    }

    .react-calendar__tile--neighboringMonth {
        color: var(--text-muted) !important;
        opacity: 0.5 !important;
    }

    .react-calendar__tile--neighboringMonth:hover {
        opacity: 0.8 !important;
    }

    .react-calendar__tile--disabled {
        opacity: 0.3 !important;
        cursor: not-allowed !important;
    }

    /* ------ TACO ------ */

    .taco-tab-reminder-div {
        @apply grid grid-rows-2 grid-flow-col gap-4 mb-8 border border-solid p-4 rounded-lg transition-all duration-200;
        background-color: var(--bg-panel);
        border-color: var(--primary);
        box-shadow: var(--shadow-sm);
    }

    .taco-tab-reminder-div:hover {
        box-shadow: var(--shadow-md);
    }

    .taco-tab-reminder-div .react-datepicker__tab-loop {
        @apply absolute
    }

    /* =========================
       ðŸŽ¨ Animations
       ========================= */
    @keyframes slide-down {
        from {
            opacity: 0;
            transform: translate(-50%, -20px);
        }
        to {
            opacity: 1;
            transform: translate(-50%, 0);
        }
    }

    .animate-slide-down {
        animation: slide-down 0.3s ease-out;
    }

    /* =========================
       ðŸŽ¨ Notification Snackbar
       ========================= */
    .notification-snackbar {
        animation: slide-in-right 0.3s ease-out;
    }

    @keyframes slide-in-right {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    .notification-snackbar:hover {
        transform: translateX(0) scale(1.02);
    }

    /* =========================
       ðŸŽ¨ React DatePicker Theme
       ========================= */
    .react-datepicker {
        background-color: var(--bg-panel) !important;
        border-color: var(--border) !important;
        color: var(--text-main) !important;
    }

    .react-datepicker__header {
        background-color: var(--bg-header) !important;
        border-bottom-color: var(--border) !important;
    }

    .react-datepicker__current-month,
    .react-datepicker__day-name {
        color: var(--text-heading) !important;
    }

    .react-datepicker__day {
        color: var(--text-main) !important;
    }

    .react-datepicker__day:hover {
        background-color: var(--hover) !important;
    }

    .react-datepicker__day--selected {
        background-color: var(--primary) !important;
        color: white !important;
    }

    .react-datepicker__day--keyboard-selected {
        background-color: var(--hover) !important;
    }

    /* =========================
       ðŸŽ¨ React TimePicker Theme
       ========================= */
    .react-time-picker {
        color: var(--text-main) !important;
    }

    .react-time-picker__inputGroup__input {
        color: var(--text-main) !important;
    }

    /* =========================
       ðŸŽ¨ Form Improvements
       ========================= */
    .card form {
        @apply space-y-4;
    }

    .card h1.title {
        @apply text-center mb-8;
        color: var(--text-heading);
        font-size: 2rem;
        font-weight: 700;
    }

    /* =========================
       ðŸŽ¨ Post Improvements
       ========================= */
    .post,
    .calendar-post,
    .reminder-post {
        @apply rounded-lg p-2 mb-2 transition-all duration-200;
        background-color: transparent;
        border: none;
        border-bottom: 1px solid var(--border);
        box-shadow: none;
    }

    .post:hover,
    .calendar-post:hover,
    .reminder-post:hover {
        background-color: var(--hover);
        border-bottom-color: var(--primary);
        transform: none;
        border-radius: 0.375rem;
    }

    /* Style spÃ©cifique pour les posts dans shopping-day-list - encore plus lÃ©ger */
    .shopping-day-list .post {
        @apply py-2 px-3 mb-1 rounded-lg;
        border: none;
        background-color: transparent;
    }

    .shopping-day-list .post:hover {
        background-color: var(--hover);
        border: none;
    }

    .shopping-day-list .post-title-input {
        @apply text-sm;
        font-weight: 500;
    }

    .shopping-day-list .post-buttons button {
        @apply text-xs;
        font-size: 0.75rem;
        width: 1.5rem;
        height: 1.5rem;
        min-width: 1.5rem;
        min-height: 1.5rem;
    }

    /* =========================
       ðŸŽ¨ Scrollbar Styling
       ========================= */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background-color: var(--bg);
    }

    ::-webkit-scrollbar-thumb {
        background-color: var(--border);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background-color: var(--primary);
    }

    /* =========================
       ðŸŽ¨ Link Improvements
       ========================= */
    a {
        color: var(--primary);
        text-decoration: none;
        transition: color 0.2s ease;
    }

    a:hover {
        color: var(--secondary);
    }

    /* =========================
       ðŸŽ¨ Selection
       ========================= */
    ::selection {
        background-color: var(--primary);
        color: white;
    }

    /* =========================
       ðŸŽ¨ Checkbox Styling
       ========================= */
    .checkbox-theme {
        @apply cursor-pointer;
        accent-color: var(--primary);
        width: 1.25rem;
        height: 1.25rem;
    }

    .checkbox-theme:checked {
        accent-color: var(--primary);
    }

    /* =========================
       ðŸŽ¨ Dashboard Improvements
       ========================= */
    .dashboard-grid {
        @apply grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4;
    }

    .dashboard-card {
        @apply p-4 rounded-lg transition-all duration-200;
        background-color: var(--bg-panel);
        border: 1px solid var(--border);
        box-shadow: var(--shadow-sm);
    }

    .dashboard-card:hover {
        box-shadow: var(--shadow-md);
        border-color: var(--primary);
        transform: translateY(-2px);
    }

    /* ----- SCREEN ----- */

    /* Phones */
    @media only screen and (max-width: 500px) {
        .card {
            @apply text-xs;
        }

        .calendar-tab {
            @apply flex-col;
        }

        .calendar-div {
            @apply w-full;
        }

        .events-calendar {
            @apply w-full;
        }
    }

    /* IPad */
    @media only screen and (min-width: 500px) and (max-width: 1000px) {
        .calendar-tab {
            @apply flex-col;
        }

        .calendar-div {
            @apply w-full;
        }

        .events-calendar {
            @apply w-full;
        }
    }

    /* NotePad && Computer Screen */
    @media only screen and (min-width: 1024px) {
        .calendar-tab {
            @apply flex-row;
        }

        .calendar-div {
            @apply w-2/5 content-center;
        }

        .events-calendar {
            @apply w-2/5;
        }

        /* Utiliser plus d'espace sur les grands Ã©crans */
        .card {
            max-width: 90rem;
        }

        .shopping-tab {
            max-width: 100%;
        }

        .shopping-day-list {
            max-width: 100%;
        }
    }
}